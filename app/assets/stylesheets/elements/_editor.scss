$sidebar-width: var(--sidebar-width, 300px);
$popout-width: var(--popout-width, 300px);
$top-height: 4rem;

.editor {
  display: grid;
  grid-template: "top top top" "aside content popout";
  grid-template-rows: $top-height auto;
  grid-template-columns: $sidebar-width auto $popout-width;
  position: fixed;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  background: $bg-dark;
  z-index: 500;
}

.editor__top {
  grid-area: top;
  background: lighten($bg-dark, 5%);
  border-bottom: 1px solid lighten($border-color, 5%);
}

.editor__aside {
  grid-area: aside;
  position: relative;
  padding: $margin / 4 0;
  background: darken($bg-dark, 5%);
  overflow: auto;
}

.editor__popout {
  grid-area: popout;
  position: relative;
  padding: $margin / 4;
  border-left: 1px solid lighten($border-color, 5%);
  overflow: auto;
}

.editor__content {
  grid-area: content;
  font-size: var(--font-size, 14px);

  .cm-editor {
    max-width: calc(100vw - #{$sidebar-width} - #{$popout-width});
  }

  .cm-scroller {
    min-height: calc(100vh - #{$top-height});
  }
}

.editor__list {
  display: grid;
}

.editor-folder {
  position: relative;
}

.editor-folder__icon {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 0.1rem;
  left: 0;
  height: 1.5rem;
  width: 1.5rem;
  cursor: pointer;
  transition: transform 150ms;
  user-select: none;

  &:hover {
    color: $text-color-light;
  }

  .editor-folder--expanded > & {
    transform: rotate(90deg);
  }
}

.editor-folder__content {
  padding-left: $margin / 3;
}

.editor-item {
  width: 100%;
  cursor: pointer;

  &--active span {
    background: darken($bg-dark, 10%);
    box-shadow: -50px 0 0 darken($bg-dark, 10%);
    color: $white;
  }

  > span {
    display: block;
    padding: 0.25rem $margin / 3;
    white-space: nowrap;

    &:hover {
      background: darken($bg-dark, 7.5%);
      box-shadow: -50px 0 0 darken($bg-dark, 7.5%);
      color: $white;
    }
  }
}

.drag-handle {
  position: absolute;
  height: 100%;
  width: 0.5rem;
  padding: 0;
  background: $bg-darker;
  border-radius: 99px;
  top: 0;
  right: 0;
  transform: translateX(50%);
  z-index: 20;
  opacity: 0;
  cursor: ew-resize;

  &--left {
    left: 0;
    right: auto;
    transform: translateX(-50%);
  }
}

.editor-wiki-search {
  position: relative;
}

.editor-wiki-results {
  position: absolute;
  bottom: $margin / -8;
  width: 100%;
  padding: $margin / 4;
  border-radius: $border-radius;
  transform: translateY(100%);
  background: $bg-darker;
  box-shadow: $shadow;
}

.editor-wiki-results__item {
  appearance: none;
  display: block;
  width: 100%;
  border: 0;
  background: transparent;
  font-size: $font-size-base;
  color: $text-color;
  font-family: $font-stack;
  text-align: left;
  cursor: pointer;

  &:hover,
  &:focus {
    color: $white;
  }

  &:focus {
    outline: 2px solid $text-color-dark;
  }

  small {
    color: $text-color-dark;
  }
}
