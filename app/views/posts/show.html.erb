<article class="item item--single">
  <div class="item__title">
    <%= @post.title %>

    <%= render "favorites/form", post: @post %>
  </div>

  <div class="item__code">
    <%= inline_svg "icons/icon-copy.svg", class: "favorite", data: { action: "copy-to-clipboard", target: @post.code } %>

    <span class="copy">
      <span data-copy="<%= @post.code %>"><%= @post.code %></span>
    </span>
  </div>
</article>

<article class="item item--bottom">
  <div class="item__details">
    <div class="item__details-item">
      Categories |

      <% JSON.parse(@post.categories).each do |category| %>
        <%= link_to category, category_path(to_slug(category)) %><%= "," unless category == JSON.parse(@post.categories).last %>
      <% end %>
    </div>

    <% if @post.tags.present? %>
      <div class="item__details-item">
        Tags |

        <% @post.tags.tr("[]", "").split(", ").each do |tag| %>
          <%= link_to tag, search_path(tag), class: "tag" %>
        <% end %>
      </div>
    <% end %>

    <div class="item__details-item">
      Heroes |

      <% JSON.parse(@post.heroes).each do |hero| %>
        <%= link_to hero, hero_path(to_slug(hero)) %><%= "," unless hero == JSON.parse(@post.heroes).last %>
      <% end %>
    </div>

    <div class="item__details-item">
      Maps |

      <% JSON.parse(@post.maps).each do |map| %>
        <%= link_to map, map_path(to_slug(map)) %><%= "," unless map == JSON.parse(@post.maps).last %>
      <% end %>
    </div>

    <div class="item__details-item">
      Last updated |

      <%= @post.updated_at.to_formatted_s(:long_ordinal) %>
    </div>
  </div>
</article>

<div class="item__description">
  <%= markdown(@post.description) %>
</div>

<%= link_to 'Edit', edit_post_path(@post.code) %> |
<%= link_to 'Back', posts_path %>
