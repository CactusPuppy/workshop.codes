<% content_for :page_title, "Your account" %>

<div class="heading items-heading">
  <h1>Your account</h1>

  <%= render "profile_block" %>
</div>

<div class="profile">
  You are logged in as <strong><%= current_user.username %></strong>

  <p>
    <%= link_to "Edit your account", edit_user_path, class: "button" %>
  </p>

  <p>
    <%= link_to "Logout", logout_path, class: "button button--secondary" %>
  </p>
</div>

<main class="items">
  <div class="heading">
    <h1>Items you've liked</h1>
  </div>

  <% @favorites.each do |favorite| %>
    <%= render "posts/post", post: favorite.post %>
  <% end %>

  <%= tag.em "You've not yet Liked any items" if @favorites.blank? %>

  <%= paginate @favorites %>

  <h1 class="heading">Your Items</h1>

  <% @posts.each do |post| %>
    <div class="item item--small">
      <div class="item__title">
        <%= link_to post.title, post_path(post.code) %>
      </div>

      <div class="item__actions">
        <div class="favorite favorite--is-active">
          <%= inline_svg "icons/icon-heart.svg", style: "height: 16px" %>
          <span class="favorite__label"><%= post.favorites_count %></span>
        </div>

        <%= link_to "Edit", edit_post_path(post.code), class: "button button--secondary" %>
        <%= link_to "Delete", post_path(post.code), class: "button button--danger", method: :delete, data: { confirm: "Are you sure you want to delete this item? This cannot be undone." } %>
      </div>
    </div>
  <% end %>
</main>
