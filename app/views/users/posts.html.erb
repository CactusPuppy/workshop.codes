<% content_for :page_title, "Your posts" %>

<%= render "layouts/account", title: "Your codes" do %>
  <% @posts.each do |post| %>
    <div data-toggle-content>
      <div class="item item--small">
        <%= render "posts/thumbnail", post: post %>

        <div>
          <div class="item__title">
            <%= link_to post.title, post_path(post.code) %>
          </div>

          <div class="item__actions">
            <%= link_to "Analytics", "#", class: "text-white mr-1/4", data: { action: "toggle-content load-analytics", id: post.id } %>
            <%= link_to "Edit", edit_post_path(post.code), class: "mr-1/4" %>
            <%= link_to "Delete", post_path(post.code), class: "text-red", method: :delete, data: { confirm: "Are you sure you want to delete this code? This cannot be undone. \n\n This will delete code: \n #{ post.code } \n\n With title: \n #{ post.title }" } %>
          </div>
        </div>
      </div>

      <div class="item__tray" data-role="content-to-toggle" style="display: none">
        <%= render "posts/analytics", post: post %>
      </div>
    </div>
  <% end %>

  <%= tag.em "You've not yet posted any Items" if @posts.blank? %>

  <%= paginate @posts %>
<% end %>
