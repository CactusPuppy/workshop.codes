<section class="collections">
  <div class="heading items-heading mb-half">
    <h2>Other Codes part of <strong><%= @post.collection.title %></strong></h2>
  </div>

  <div class="cards">
    <% @post.collection.posts.limit(9).each do |post| %>
      <% next if @post == post %>

      <div class="card" style="<%= "background-image: url(#{ polymorphic_url(post.images.find_by_blob_id(JSON.parse(post.image_order).first).variant(quality: 95, resize_to_fill: [450, 250]).processed) }" if post.images.any? && JSON.parse(post.image_order).any? %>">
        <%= link_to post.title, post_path(post.code), class: "card__title" %>

        <div>
          <%= inline_svg_tag "icons/icon-copy.svg", class: "copy-trigger", data: { action: "copy-to-clipboard", target: post.code } %>

          <span class="copy">
            <span data-copy="<%= post.code %>"><%= post.code %></span>
          </span>
        </div>
      </div>
    <% end %>
  </div>

  <% if @post.collection.posts.size > 9 %>
    <small class="mt-half mr-quarter"><em><%= "And #{ @post.collection.posts.size - 9 } more..." %></em></small>
  <% end %>

  <%= link_to "View collection", collection_path(@post.collection.nice_url), class: "button button--secondary button--small mt-half" %>
</section>
