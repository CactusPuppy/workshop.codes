(() => {
  <% if @articles.any? %>
    const elements = document.querySelectorAll("[data-role='infinite-scroll-marker']")

    elements[elements.length - 1].insertAdjacentHTML("afterEnd", `
      <%= j render @articles %>
      <% if @articles.count == PAGE_SIZE %>
        <div class="infinite-scroll" data-role="infinite-scroll-marker" data-url="<%= request.original_url %>"></div>
      <% else %>
        <h4 class="mt-1/2 mb-0"><center>You've reached the end.</center></h4>
      <% end %>
    `)
  <% end %>
})()
